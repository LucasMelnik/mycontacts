{"ast":null,"code":"var _jsxFileName = \"/home/melnik/dev/jstack/mycontacts/web/src/pages/Home/index.js\",\n    _s = $RefreshSig$();\n\nimport { Link } from 'react-router-dom';\nimport { useEffect, useState, useMemo, useCallback } from 'react';\nimport { Card, Container, InputSearchContainer, Header, ListHeader, ErrorContainer } from './styles';\nimport arrow from '../../assets/images/icons/arrow.svg';\nimport edit from '../../assets/images/icons/edit.svg';\nimport trash from '../../assets/images/icons/trash.svg';\nimport sad from '../../assets/images/icons/sad.svg';\nimport Loader from '../../components/Loader';\nimport Button from '../../components/Button';\nimport ContactsService from '../../services/ContactsService';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function Home() {\n  _s();\n\n  const [contacts, setContacts] = useState([]);\n  const [orderBy, setOrderBy] = useState('asc');\n  const [searchTerm, setSearchTerm] = useState('');\n  const [isLoading, setIsLoading] = useState(true);\n  const [hasError, setHasError] = useState(false);\n  const filteredContacts = useMemo(() => contacts.filter(contact => contact.name.toLowerCase().includes(searchTerm.toLowerCase())), [contacts, searchTerm]);\n  const loadContacts = useCallback(async () => {\n    try {\n      setIsLoading(true);\n      const contactsList = await ContactsService.listContacts(orderBy);\n      setHasError(false);\n      setContacts(contactsList);\n    } catch {\n      setHasError(true);\n    } finally {\n      setIsLoading(false);\n    }\n  }, [orderBy]);\n  useEffect(() => {\n    loadContacts();\n  }, [loadContacts]);\n\n  function handleToggleOrderBy() {\n    setOrderBy(prevState => prevState === 'asc' ? 'desc' : 'asc');\n  }\n\n  function handleChengeSearchTerm(event) {\n    setSearchTerm(event.target.value);\n  }\n\n  function handleTryAgain() {\n    loadContacts();\n  }\n\n  return /*#__PURE__*/_jsxDEV(Container, {\n    children: [/*#__PURE__*/_jsxDEV(Loader, {\n      isLoading: isLoading\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }, this), contacts.length > 0 && /*#__PURE__*/_jsxDEV(InputSearchContainer, {\n      children: /*#__PURE__*/_jsxDEV(\"input\", {\n        value: searchTerm,\n        type: \"text\",\n        placeholder: \"Pesquise pelo nome...\",\n        onChange: handleChengeSearchTerm\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 11\n    }, this), /*#__PURE__*/_jsxDEV(Header, {\n      hasError: hasError,\n      children: [!hasError && /*#__PURE__*/_jsxDEV(\"strong\", {\n        children: [filteredContacts.length, filteredContacts.length === 1 ? ' contato' : ' contatos']\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Link, {\n        to: \"/new\",\n        children: \"Novo contato\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }, this), hasError && /*#__PURE__*/_jsxDEV(ErrorContainer, {\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        src: sad,\n        alt: \"Sad\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"details\",\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Ocorreu um erro ao obter os seus contatos\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          onClick: handleTryAgain,\n          children: \"Tentar novamente\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 9\n    }, this), !hasError && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [filteredContacts.length > 0 && /*#__PURE__*/_jsxDEV(ListHeader, {\n        orderBy: orderBy,\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          onClick: handleToggleOrderBy,\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Nome\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n            src: arrow,\n            alt: \"Arrow\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 108,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 11\n      }, this), filteredContacts.map(contact => /*#__PURE__*/_jsxDEV(Card, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"info\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"contact-name\",\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: contact.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 117,\n              columnNumber: 19\n            }, this), contact.category_name && /*#__PURE__*/_jsxDEV(\"small\", {\n              children: contact.category_name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 118,\n              columnNumber: 45\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: contact.email\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: contact.phone\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 121,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"actions\",\n          children: [/*#__PURE__*/_jsxDEV(Link, {\n            to: `/edit/${contact.id}`,\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              src: edit,\n              alt: \"edit\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 126,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 125,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              src: trash,\n              alt: \"edit\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 129,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 15\n        }, this)]\n      }, contact.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 13\n      }, this))]\n    }, void 0, true)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 64,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Home, \"SQ5mVCOHs/x34xWYdp2EqIxabcs=\");\n\n_c = Home;\n\nvar _c;\n\n$RefreshReg$(_c, \"Home\");","map":{"version":3,"names":["Link","useEffect","useState","useMemo","useCallback","Card","Container","InputSearchContainer","Header","ListHeader","ErrorContainer","arrow","edit","trash","sad","Loader","Button","ContactsService","Home","contacts","setContacts","orderBy","setOrderBy","searchTerm","setSearchTerm","isLoading","setIsLoading","hasError","setHasError","filteredContacts","filter","contact","name","toLowerCase","includes","loadContacts","contactsList","listContacts","handleToggleOrderBy","prevState","handleChengeSearchTerm","event","target","value","handleTryAgain","length","map","category_name","email","phone","id"],"sources":["/home/melnik/dev/jstack/mycontacts/web/src/pages/Home/index.js"],"sourcesContent":["import { Link } from 'react-router-dom';\nimport {\n  useEffect, useState, useMemo, useCallback,\n} from 'react';\nimport {\n  Card, Container, InputSearchContainer, Header, ListHeader, ErrorContainer,\n} from './styles';\n\nimport arrow from '../../assets/images/icons/arrow.svg';\nimport edit from '../../assets/images/icons/edit.svg';\nimport trash from '../../assets/images/icons/trash.svg';\nimport sad from '../../assets/images/icons/sad.svg';\n\nimport Loader from '../../components/Loader';\nimport Button from '../../components/Button';\n\nimport ContactsService from '../../services/ContactsService';\n\nexport default function Home() {\n  const [contacts, setContacts] = useState([]);\n  const [orderBy, setOrderBy] = useState('asc');\n  const [searchTerm, setSearchTerm] = useState('');\n  const [isLoading, setIsLoading] = useState(true);\n  const [hasError, setHasError] = useState(false);\n\n  const filteredContacts = useMemo(() => contacts.filter((contact) => (\n    contact.name.toLowerCase().includes(searchTerm.toLowerCase())\n  )), [contacts, searchTerm]);\n\n  const loadContacts = useCallback(async () => {\n    try {\n      setIsLoading(true);\n\n      const contactsList = await ContactsService.listContacts(orderBy);\n\n      setHasError(false);\n      setContacts(contactsList);\n    } catch {\n      setHasError(true);\n    } finally {\n      setIsLoading(false);\n    }\n  }, [orderBy]);\n\n  useEffect(() => {\n    loadContacts();\n  }, [loadContacts]);\n\n  function handleToggleOrderBy() {\n    setOrderBy(\n      (prevState) => (prevState === 'asc' ? 'desc' : 'asc'),\n    );\n  }\n\n  function handleChengeSearchTerm(event) {\n    setSearchTerm(event.target.value);\n  }\n\n  function handleTryAgain() {\n    loadContacts();\n  }\n\n  return (\n    <Container>\n      <Loader isLoading={isLoading} />\n\n      {\n        contacts.length > 0 && (\n          <InputSearchContainer>\n            <input\n              value={searchTerm}\n              type=\"text\"\n              placeholder=\"Pesquise pelo nome...\"\n              onChange={handleChengeSearchTerm}\n            />\n          </InputSearchContainer>\n        )\n      }\n\n      <Header hasError={hasError}>\n        {!hasError && (\n          <strong>\n            {filteredContacts.length}\n            {filteredContacts.length === 1 ? ' contato' : ' contatos'}\n          </strong>\n        )}\n        <Link to=\"/new\">Novo contato</Link>\n      </Header>\n\n      {hasError && (\n        <ErrorContainer>\n          <img src={sad} alt=\"Sad\" />\n          <div className=\"details\">\n            <strong>Ocorreu um erro ao obter os seus contatos</strong>\n            <Button onClick={handleTryAgain}>\n              Tentar novamente\n            </Button>\n          </div>\n        </ErrorContainer>\n      )}\n\n      {!hasError && (\n        <>\n          {filteredContacts.length > 0 && (\n          <ListHeader orderBy={orderBy}>\n            <button type=\"button\" onClick={handleToggleOrderBy}>\n              <span>Nome</span>\n              <img src={arrow} alt=\"Arrow\" />\n            </button>\n          </ListHeader>\n          )}\n\n          {filteredContacts.map((contact) => (\n            <Card key={contact.id}>\n              <div className=\"info\">\n                <div className=\"contact-name\">\n                  <strong>{contact.name}</strong>\n                  {contact.category_name && <small>{contact.category_name}</small>}\n                </div>\n                <span>{contact.email}</span>\n                <span>{contact.phone}</span>\n              </div>\n\n              <div className=\"actions\">\n                <Link to={`/edit/${contact.id}`}>\n                  <img src={edit} alt=\"edit\" />\n                </Link>\n                <button type=\"button\">\n                  <img src={trash} alt=\"edit\" />\n                </button>\n              </div>\n            </Card>\n          ))}\n        </>\n      )}\n    </Container>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}