{"ast":null,"code":"import delay from '../../utils/ delay';\nimport APIError from '../../errors/APIError';\nclass HttpClient {\n  constructor(baseURL) {\n    this.baseURL = baseURL;\n  }\n  get(path, options) {\n    return this.makeRequest(path, {\n      method: 'GET',\n      headers: options === null || options === void 0 ? void 0 : options.headers,\n      signal: options === null || options === void 0 ? void 0 : options.signal\n    });\n  }\n  post(path, options) {\n    return this.makeRequest(path, {\n      method: 'POST',\n      body: options === null || options === void 0 ? void 0 : options.body,\n      headers: options === null || options === void 0 ? void 0 : options.headers\n    });\n  }\n  put(path, options) {\n    return this.makeRequest(path, {\n      method: 'PUT',\n      body: options === null || options === void 0 ? void 0 : options.body,\n      headers: options === null || options === void 0 ? void 0 : options.headers\n    });\n  }\n  delete(path, options) {\n    return this.makeRequest(path, {\n      method: 'DELETE',\n      headers: options === null || options === void 0 ? void 0 : options.headers\n    });\n  }\n  async makeRequest(path, options) {\n    await delay(500);\n    const headers = new Headers();\n    if (options.body) {\n      headers.append('Content-Type', 'application/json');\n    }\n    if (options.headers) {\n      Object.entries(options.headers).forEach(_ref => {\n        let [name, value] = _ref;\n        headers.append(name, value);\n      });\n    }\n    const response = await fetch(`${this.baseURL + path}`, {\n      method: options.method,\n      body: JSON.stringify(options.body),\n      headers,\n      signal: options.signal\n    });\n    let responseBody = null;\n    const contentType = response.headers.get('Content-Type');\n    if (contentType !== null && contentType !== void 0 && contentType.includes('application/json')) {\n      responseBody = await response.json();\n    }\n    if (response.ok) {\n      return responseBody;\n    }\n    throw new APIError(response, responseBody);\n  }\n}\nexport default HttpClient;","map":{"version":3,"names":["delay","APIError","HttpClient","constructor","baseURL","get","path","options","makeRequest","method","headers","signal","post","body","put","delete","Headers","append","Object","entries","forEach","_ref","name","value","response","fetch","JSON","stringify","responseBody","contentType","includes","json","ok"],"sources":["/home/melnik/dev/jstack/mycontacts/web/src/services/utils/HttpClient.js"],"sourcesContent":["import delay from '../../utils/ delay';\nimport APIError from '../../errors/APIError';\n\nclass HttpClient {\n  constructor(baseURL) {\n    this.baseURL = baseURL;\n  }\n\n  get(path, options) {\n    return this.makeRequest(path, {\n      method: 'GET',\n      headers: options?.headers,\n      signal: options?.signal,\n    });\n  }\n\n  post(path, options) {\n    return this.makeRequest(path, {\n      method: 'POST',\n      body: options?.body,\n      headers: options?.headers,\n    });\n  }\n\n  put(path, options) {\n    return this.makeRequest(path, {\n      method: 'PUT',\n      body: options?.body,\n      headers: options?.headers,\n    });\n  }\n\n  delete(path, options) {\n    return this.makeRequest(path, {\n      method: 'DELETE',\n      headers: options?.headers,\n    });\n  }\n\n  async makeRequest(path, options) {\n    await delay(500);\n\n    const headers = new Headers();\n\n    if (options.body) {\n      headers.append('Content-Type', 'application/json');\n    }\n\n    if (options.headers) {\n      Object.entries(options.headers).forEach(([name, value]) => {\n        headers.append(name, value);\n      });\n    }\n\n    const response = await fetch(`${this.baseURL + path}`, {\n      method: options.method,\n      body: JSON.stringify(options.body),\n      headers,\n      signal: options.signal,\n    });\n\n    let responseBody = null;\n    const contentType = response.headers.get('Content-Type');\n    if (contentType?.includes('application/json')) {\n      responseBody = await response.json();\n    }\n\n    if (response.ok) {\n      return responseBody;\n    }\n\n    throw new APIError(response, responseBody);\n  }\n}\n\nexport default HttpClient;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}